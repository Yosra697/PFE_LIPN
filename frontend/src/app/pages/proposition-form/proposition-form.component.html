<div class="page-container">

  <h2 class="main-title">Effectuer une proposition de thèse</h2>

  <form #form="ngForm" (ngSubmit)="save()">

    <!-- ================= DIRECTION ================= -->
    <div class="form-section">

      <div class="section-title">Direction de la thèse</div>

      <div class="toggle-container">
        <span>Y a-t-il une co-direction ?</span>

        <label class="switch">
          <input type="checkbox"
                 [(ngModel)]="hasDirection"
                 name="hasDirection">
          <span class="slider"></span>
        </label>

        <span class="toggle-label">
          {{ hasDirection ? 'Oui' : 'Non' }}
        </span>
      </div>

      <div class="form-grid" *ngIf="hasDirection">

        <div class="form-group">
          <label>Nom du co-encadrant</label>
          <input type="text"
                 [(ngModel)]="proposition.coEncadrantNom"
                 name="coEncadrantNom">
        </div>

        <div class="form-group">
          <label>Prénom du co-encadrant</label>
          <input type="text"
                 [(ngModel)]="proposition.coEncadrantPrenom"
                 name="coEncadrantPrenom">
        </div>

      </div>
    </div>

    <!-- ================= DOCTORANT ================= -->
    <div class="form-section">

      <div class="section-title">Doctorant</div>

      <div class="toggle-container">
        <span>Doctorant déjà sélectionné ?</span>

        <label class="switch">
          <input type="checkbox"
                 [(ngModel)]="hasDoctorant"
                 name="hasDoctorant">
          <span class="slider"></span>
        </label>

        <span class="toggle-label">
          {{ hasDoctorant ? 'Oui' : 'Non' }}
        </span>
      </div>

      <div class="form-grid" *ngIf="hasDoctorant">

        <div class="form-group">
          <label>Nom</label>
          <input type="text"
                 [(ngModel)]="doctorant.nom"
                 name="doctorantNom">
        </div>

        <div class="form-group">
          <label>Prénom</label>
          <input type="text"
                 [(ngModel)]="doctorant.prenom"
                 name="doctorantPrenom">
        </div>

        <div class="form-group">
          <label>Email</label>
          <input type="email"
                 [(ngModel)]="doctorant.email"
                 name="doctorantEmail">
        </div>

        <div class="form-group full-width">
          <label>Dossier (ZIP)</label>
          <input type="file"
                 (change)="onDoctorantFileSelected($event)">
        </div>

      </div>
    </div>

    <!-- ================= DÉTAILS ================= -->
    <div class="form-section">

      <div class="section-title">Détails de la thèse</div>

      <div class="form-grid">

        <div class="form-group">
          <label>Titre du sujet</label>
          <input type="text"
                 [(ngModel)]="proposition.sujet"
                 name="sujet"
                 required>
        </div>

        <div class="form-group">
          <label>Ecole doctorale</label>
          <input type="text"
                 [(ngModel)]="proposition.ecoleDoctorale"
                 name="ecoleDoctorale">
        </div>

        <div class="form-group full-width">
          <label>Description</label>
          <textarea rows="4"
                    [(ngModel)]="proposition.description"
                    name="description">
          </textarea>
        </div>

        <div class="form-group">
          <label>Début</label>
          <input type="date"
                 [(ngModel)]="proposition.dateDebut"
                 name="dateDebut">
        </div>

        <div class="form-group">
          <label>Financement</label>

          <select [(ngModel)]="proposition.financement"
                  name="financement">

            <option *ngFor="let f of financements"
                    [ngValue]="f">
              {{ f.replaceAll('_',' ') }}
            </option>

          </select>
        </div>

        <div class="form-group full-width">
          <label>Commentaire</label>
          <textarea rows="3"
                    [(ngModel)]="proposition.commentaire"
                    name="commentaire">
          </textarea>
        </div>

        <div class="form-group full-width">
          <label>PDF de la proposition</label>
          <input type="file"
                 (change)="onPdfSelected($event)">
        </div>

      </div>
    </div>

    <div class="button-container right">
      <button type="submit" class="btn-submit">
        Proposer cette thèse
      </button>
    </div>

  </form>

</div>
